<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>nw-test</title>
  </head>
  <body>
    <h1>test fs</h1>
    <p>test fs model and path model include: fs.readdir() and path.resolve()</p>
    <p id='message'></p>
    <script type="text/javascript">
    var fs = require('fs');
    var path = require('path');
    var abpath = path.resolve('./');

     process.on('uncaughtException', function(err) {
        console.log('wwtwwt: ' + err);
    });
    try{
        process.chdir('sdcard');
     }
    catch(err){
        console.log("wwtwwt: "+err);
    }
    var currentPath = process.cwd();
    document.getElementById('message').innerHTML =  fs.toString()+'  <br>current path: '+abpath + "  <br>__dirname=" + currentPath+  "     <br>all file list:  ";
    	fs.readdir(currentPath,function(err, files){
    		if(err) throw err;
    		else for (var i = 0; i < files.length; i++) {
    			document.getElementById('message').innerHTML += "<br> " +files[i];
    		};
    	});
        console.log("wwtwwt: dir is : " + currentPath+ 'sdcard/test-mkdir');
          fs.mkdir(currentPath+ 'sdcard/test-mkdir',function(err){
                if(err) console.log("wwtwwt:  mkdir err:: " + err);
          })
    </script>
  </body>
</html>